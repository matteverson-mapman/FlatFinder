<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Community Map with Layers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    body, html { margin:0; padding:0; height:100%; }
    #map { width:100%; height:100vh; }
  </style>
</head>
<body>
<div id="map"></div>

<script>
  var map = L.map('map').setView([40, -95], 4);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // List all your GeoJSON files here
  var geojsonFiles = [
      {name: "Community Centers", file: "layers/mydata.geojson"},
      {name: "Parks", file: "layers/newlayer.geojson"}
  ];

  var overlayLayers = {}; // store Leaflet layers

  geojsonFiles.forEach(item => {
      fetch(item.file)
      .then(res => res.json())
      .then(data => {
          var layer = L.geoJSON(data, {
              onEachFeature: function(feature, layer) {
                  if(feature.properties){
                      let popupContent = Object.entries(feature.properties)
                        .map(([k,v]) => `<b>${k}</b>: ${v}`).join('<br>');
                      layer.bindPopup(popupContent);
                  }
              }
          });
          overlayLayers[item.name] = layer;
          layer.addTo(map); // optional: show by default
          L.control.layers(null, overlayLayers, {collapsed: false}).addTo(map);
      });
  });
</script>
</body>
</html>
